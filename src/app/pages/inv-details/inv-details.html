<div class="container mx-auto px-4 py-6 max-w-6xl">
  <!-- topbar -->
  <div class="mb-4">
    <a routerLink="/" class="btn btn-ghost btn-sm"> ← Назад </a>
  </div>

  @if(loading()){
  <div class="card bg-base-300 shadow-md">
    <div class="card-body gap-4">
      <div class="flex items-center gap-3">
        <span class="loading loading-spinner"></span>
        <span class="text-base-content/70">Загрузка…</span>
      </div>
      <div class="grid md:grid-cols-2 gap-6">
        <div class="space-y-3">
          <div class="skeleton h-8 w-3/4"></div>
          <div class="skeleton h-4 w-1/3"></div>
          <div class="skeleton h-4 w-1/4"></div>
          <div class="skeleton h-24 w-full"></div>
        </div>
        <div class="skeleton h-56 w-full"></div>
      </div>
    </div>
  </div>
  }

  <!-- content -->
  @if(!loading()&&data()){
  <div class="card bg-base-100 shadow-sm">
    <div class="card-body">
      <!-- header -->
      <div class="grid md:grid-cols-2 gap-6 items-start">
        <div>
          <h1 class="text-2xl font-semibold mb-2">
            {{ data()!.title }}
          </h1>
          <div
            class="flex flex-wrap items-center gap-3 text-sm text-base-content/70"
          >
            <div class="badge badge-outline">{{ data()?.ownerName }}</div>
            <span>•</span>
            <div>Создан: {{ data()?.createdAt | date : "d.MM.yyyy h:mm" }}</div>
            <span>•</span>
            <div class="flex items-center gap-2">
              <div class="badge">{{ data()!.itemsCount }} items</div>
              <div class="badge badge-secondary">
                {{ data()!.likesCount }} likes
              </div>
            </div>
          </div>

          <!-- tags -->
          @if(data()?.tags?.length){
          <div class="mt-4 flex flex-wrap gap-2">
            @for (tag of data()?.tags; track $index) {
            <span class="badge badge-ghost">#{{ tag }}</span>
            }
          </div>
          }
        </div>
        @if (data()?.imageUrl) {
        <img
          [src]="data()?.imageUrl"
          alt="cover"
          class="w-full h-56 object-cover rounded-xl"
        />
        }
      </div>

      <!-- description -->
      @if(data()?.descriptionMarkdown){
      <div class="mt-6">
        <h3 class="text-lg font-semibold mb-2">Описание</h3>
        <!-- без внешних библиотек просто показываем preformatted -->
        <pre
          class="whitespace-pre-wrap bg-base-200 rounded-xl p-4 border border-base-300"
          >{{ data()!.descriptionMarkdown }}</pre
        >
      </div>
      }

      <!-- fields -->
      @if(data()?.fields?.length){
      <div class="mt-6">
        <h3 class="text-lg font-semibold mb-2">Поля инвентаря</h3>

        <div class="overflow-x-auto">
          <table class="table">
            <thead>
              <tr>
                <th>Название</th>
                <th>Тип</th>
                <th>В таблице</th>
                <th>Порядок</th>
              </tr>
            </thead>
            <tbody>
              @for (f of data()?.fields; track $index) {
              <tr>
                <td class="font-medium">{{ f.title }}</td>
                <td>
                  <span class="badge badge-outline">
                    {{ f.type }}
                  </span>
                </td>
                <td>
                  <span
                    class="badge"
                    [ngClass]="f.showInTable ? 'badge-success' : 'badge-ghost'"
                    >{{ f.showInTable ? "Да" : "Нет" }}</span
                  >
                </td>
                <td class="font-mono">{{ f.order }}</td>
              </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
      }

      <!-- actions (пример) -->
      <div class="card-actions justify-end mt-4">
        <a routerLink="/" class="btn btn-outline">На главную</a>
      </div>
    </div>
  </div>
  }
</div>
